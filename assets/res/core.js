(function(){var b='[CORE]';console.log(b+'START');var c={_sp:'/*****/',scriptCache:'',index:0,Class:{create:function(){return function(){this._init.apply(this,arguments)}}}};c.type=function(d){return Object.prototype.toString.call(d)};c.extend=function(d,e){var f=d;for(var g in e){if(e.hasOwnProperty(g)){f[g]=e[g]}};return f};Cache=c.Class.create();Cache.prototype={_obj:null,_init:function(d){this._obj=d},isEnable:function(){if(this._obj&&'[object Storage]'==c.type(this._obj)){try{this._obj.setItem('storagetest','test');this._obj.removeItem("storagetest");return true}catch(e){try{this._obj.clear();console.log(b+'cacheStorage is full & Clear all!');this._obj.setItem('storagetest','test');this._obj.removeItem("storagetest");return true}catch(e){return false}}}},del:function(){if(!this.isEnable)return false;var d=arguments;if(d.length==0){this._obj.clear()}else{for(var e=0;e<d.length;e++){if(d[e])this._obj.remove(d[e].toUpperCase())}};return true},get:function(d){if(!this.isEnable)return false;var f=null;f=this._obj.getItem(d.toUpperCase());try{f=JSON.parse(f)}catch(e){} return f},set:function(d,e){if(!this.isEnable)return false;if(e===null){return this.del(d)};if('object'==typeof(e)){this._obj.setItem(d.toUpperCase(),JSON.stringify(e))}else{this._obj.setItem(d.toUpperCase(),e)};return e}};c.cache={};c.cache.local=new Cache(localStorage);c.cache.session=new Cache(sessionStorage);c.ajax=function(){var d=arguments,e=null,f=function(){};var o={url:'',type:'GET',data:null,async:true,success:f,failure:f,complete:f};if(d.length==1){if(typeof d[0]=='object'){o=c.extend(o,d[0])}else{o.url=d[0]}}else if(d.length==2){o.url=d[0];o.complete=d[1]}else if(d.length==3){o.url=d[0];o.data=d[1];o.success=d[2]}else if(d.length==4){o.url=d[0];o.data=d[1];o.type=d[2];o.success=d[3]}else if(d.length==5){o.url=d[0];o.data=d[1];o.type=d[2];o.success=d[3];o.failure=d[4]};if(!o.url||o.url==''){console.error(b+'AJAX_ERR:url is null');if(typeof o.failure=='function'){o.failure()};return false};o.type=o.type&&o.type=='GET'?'GET':'POST';o.data=o.data||null;o.async=o.async?true:false;var g=new XMLHttpRequest();if(!!g){if(o.type=='POST'){g.setRequestHeader("Content-Type","application/x-www-form-urlencoded;")};g.open(o.type,o.url,o.async);g.onreadystatechange=function(){if(g.readyState==4&&(g.status>=200&&g.status<300||g.status===304)){if(typeof o.success=='function'){o.success(g.responseText)}}else{console.error(b+'AJAX_ERR:req state is error');if(typeof o.failure=='function'){o.failure(g)}}};g.send(o.data);e=g}else{console.error(b+'AJAX_ERR:req is null');if(typeof o.failure=='function'){o.failure()}};if(typeof o.complete=='function'){o.complete()};return e};c.getScript=function(d,e,f){c.ajax({url:d,async:false,success:e,failure:f})};c.evalScript=function(d){try{eval(d);return d+c._sp}catch(e){console.error(b+'EVAL_ERR_1:'+c.index+'\tE:'+e);try{eval('('+d+')');return d+c._sp}catch(ee){console.error(b+'EVAL_ERR_2:'+c.index+'\tEE:'+ee)}};return''};c.getScriptsCache=function(){if(!WT.SCRIPT_LIST[c.index]||WT.SCRIPT_LIST[c.index]=='')return;c.getScript(WT.SCRIPT_LIST[c.index]+'?v='+WT.SERVER_VERSION,function(d){c.scriptCache+=c.evalScript(d);if(++c.index<WT.SCRIPT_LIST.length){c.getScriptsCache()}else{c.executeScript(c.scriptCache)}},function(d){console.error(b+'GETJS_ERR:'+d)})};c.writeScript=function(){console.info(b+'Script is writing!');for(var d=0;d<WT.SCRIPT_LIST.length;d++){var e=document.createElement("script");e.type="text/javascript";e.src=WT.SCRIPT_LIST[d]+'?v='+WT.SERVER_VERSION;document.getElementById('head').appendChild(e)};console.info(b+'Script is write successful!')};c.executeScript=function(d){try{console.info(b+'ScriptCache loading...');if(d.length>0&&(d.substr(0,6)=='window'||d.substr(0,6)=='(funct'||d.substr(3,5)=='Zepto')){if(!window.$){var f=d.split(c._sp);if(f&&f.length>0){for(var g=0,sl=f.length;g<sl;g++){try{if(!f[g])continue;eval(f[g])}catch(e){console.error(b+'EXECUTE_ERR_1:'+e);try{eval('('+f[g]+')')}catch(ee){console.error(b+'EXECUTE_ERR_2:'+ee)}}}}};if(!window.$){console.warn(b+'$ is not loaded!');c.writeScript()}else if(c.cache.local.get('script_cache')!=d){c.cache.local.set('script_cache',d);c.cache.local.set('script_version',WT.SERVER_VERSION||0);console.info(b+'ScriptCache save localStorage successful!')}else{console.info(b+'ScriptCache Unchanged!')}}else{console.warn(b+'ScriptCache load error!')}}catch(e){console.error(b+'EXECUTE_ERR:'+e);c.writeScript()}};try{if(c.cache.local.isEnable()){var d=WT.SERVER_VERSION||0;var e=c.cache.local.get('script_version')||-1;if(d!=e){c.cache.local.del();console.log(b+'localStorage is clear all!')};if(c.cache.local.get('script_cache')){c.executeScript(c.cache.local.get('script_cache'))}else{c.getScriptsCache()}}else{c.getScriptsCache()}}catch(ee){console.error(b+'ERR:'+ee);c.getScriptsCache()};window.CORE=c})();